<ion-header>
  <ion-navbar color="primary">
    <ion-title>Register Donor</ion-title>
    <ion-buttons end>
      <button (click)="getContacts()" color="dark" slot="end" ion-button>
        <ion-icon style="font-size: large;" name="add-circle"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content padding >
  <div *ngIf="isDonarAdd == true"> 
    <!-- Add New Member -->
    <!-- <button (click)="getContacts()" color="secondary"  slot="end" ion-button>
      <ion-icon name="contact"></ion-icon>
      Add from Phone Contact
    </button> -->

    <form class="list-form" [formGroup]="memberadd">
      <!-- <p color="dark" style="font-size: 15px;float:right;padding-right: 10px;" stacked>Click to add from contact</p>-->
      <ion-item>
        <ion-label floating>
          <ion-icon name="male" item-start class="text-primary"></ion-icon>
          Prefix
        </ion-label>
        <ion-select formControlName="Prefix">
          <ion-option value="Shri">Shri</ion-option>
          <ion-option value="Smt">Smt</ion-option>
          <ion-option value="Kum">Kum</ion-option>
        </ion-select>
      </ion-item>


      <!-- <ion-item>
        <ion-label floating>
          <ion-icon name="person" item-start class="text-primary"></ion-icon>
          Donated By
        </ion-label>
        <ion-input type="text" [(ngModel)]="name" formControlName="donatedby"></ion-input>
      </ion-item> -->
      <div class="autocomplete">
        <ion-item>
          <ion-label floating>
            <ion-icon name="person" item-start class="text-primary"></ion-icon>
            Donated By
          </ion-label>
          <ion-input  type="text" [(ngModel)]="input" formControlName="donatedby"
                      (ionChange)="search()"
                      (ionBlur)="removeFocus()"
                      debounce=500></ion-input>
        </ion-item>
        <ion-list>
          <ion-item *ngFor="let item of countries" (click)="add(item)">
            {{item.FullName}}
          </ion-item>
        </ion-list>
    </div>

      <ion-item>
        <ion-label floating>
          <ion-icon name="person" item-start class="text-primary"></ion-icon>
          In the Name of
        </ion-label>
        <ion-input type="text" formControlName="inthenameof"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>
          <ion-icon name="person" item-start class="text-primary"></ion-icon>
          Point of Contact
        </ion-label>
        <ion-select formControlName="pointofcontact" (ionChange)="selectpointocont()">
          <ion-option value="myself">MySelf</ion-option>
          <ion-option value="other">Other</ion-option>
        </ion-select>
      </ion-item>

      
      <ion-item *ngIf="itemselcted == 'other'">
        <ion-label floating>
          <ion-icon name="person" item-start class="text-primary"></ion-icon> Other
        </ion-label>
        <ion-input  type="text" placeholder="Other Point of contact"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>
          <ion-icon name="locate" item-start class="text-primary"></ion-icon>
          Residential Address
        </ion-label>
        <ion-textarea type="text" formControlName="address"></ion-textarea>
      </ion-item>
      
      <ion-item>
        <ion-label floating>
          <ion-icon name="call" item-start class="text-primary"></ion-icon>
          Contact Number
        </ion-label>
        <ion-input type="tel" [(ngModel)]="mobile" formControlName="mobilenumber"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>
          <ion-icon name="calendar" item-start class="text-primary"></ion-icon>
         Date of Birth
        </ion-label>
        <ion-datetime displayFormat="YYYY-MM-DD" [max]="maxDate" [(ngModel)]="startDate" formControlName="dateofbirth"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label floating>
          <ion-icon name="mail" item-start class="text-primary"></ion-icon>
          Email Id
        </ion-label>
        <ion-input type="email"  [(ngModel)]="email" formControlName="emailaddress"></ion-input>
      </ion-item>
      
      <ion-item>
        <ion-label floating>
          <ion-icon name="pricetag" item-start class="text-primary"></ion-icon>
          Amount in Figures 
        </ion-label>
        <ion-input type="tel" [(ngModel)]="amount" (ngModelChange)="getamountToword($event,amount)" formControlName="amountinfigure"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>
          <ion-icon name="logo-wordpress" item-start class="text-primary"></ion-icon>
          Amount in Words  
        </ion-label>
        <ion-input type="text" [(ngModel)]="amountinword" formControlName="amountinword"></ion-input>
      </ion-item>

      <ion-item *ngIf="amount >= 10000">
        <ion-label floating>
          <ion-icon name="card" item-start class="text-primary"></ion-icon>
         PAN (For Donations Exceeding Rs. 10 Thousand)
        </ion-label>
        <ion-input type="text"  [(ngModel)]="pan" formControlName="panNUmber"></ion-input>
      </ion-item> 

      <!-- <ion-row>
        <ion-col col-6> -->
      <ion-item>
        <ion-label floating>
          <ion-icon name="apps" item-start class="text-primary"></ion-icon>
          Donation Towards 
        </ion-label>
        <ion-select formControlName="donationtowards">
          <ion-option value="Projects">Projects</ion-option>
          <ion-option value="Corpus">Corpus</ion-option>
          <ion-option value="Membership Subscription">Membership Subscription </ion-option>
          <ion-option value="Administration">Administration</ion-option>
        </ion-select>
      </ion-item>
        <!-- </ion-col>
        <ion-col col-6> -->
      <ion-item>
        <ion-label floating>
          <ion-icon name="cash" item-start class="text-primary"></ion-icon>
          Mode of Donation
        </ion-label>
        <ion-select formControlName="paymentmode">
          <ion-option value="PAYMENTGATEWAY">PAYMENT GATEWAY</ion-option>
          <ion-option value="NETBANKING">NETBANKING</ion-option>
          <ion-option value="CHEQUE">CHEQUE</ion-option>
          <ion-option value="CASH">CASH</ion-option>
          <ion-option valie="UPI">UPI</ion-option>
        </ion-select>
      </ion-item>
        <!-- </ion-col>
      </ion-row> -->
            
      <ion-item>
        <ion-label floating>
          <ion-icon name="text" item-start class="text-primary"></ion-icon>
          Transaction Details 
        </ion-label>
        <ion-textarea rows="6" cols="20" [(ngModel)]="referenceno" formControlName="referenceno"></ion-textarea>
      </ion-item>

      <!-- -->
      <div class="row" style="border-bottom:0px">
      
        <div class="col" style="text-align: right;font-size: 12px">
          <button (click)="clearData()"  ion-button block color="danger" type="submit">
            Clear
          </button>
        </div>

        <div class="col">
          <button (click)="viewReceipt()"  ion-button block color="warning" type="submit">
            Review
          </button>
        </div>

        <div class="col" style="font-size: 12px">
          <!-- 1 == New Insert , 2 == Update and 3 == Delete -->
          <!-- 0 == Permanent save, 1 == Temporary Save -->
          <!-- ('','') -->

          <!-- Here new record entry will get created with Permanent Save option-->
          <!-- <button *ngIf="updateReq == false"  (click)="manageDonorReq('1','0')" ion-button block color="secondary" type="submit">
            Submit
          </button> -->
           <!-- This will be visible only if we want to add new entry with Temporary save option -->
          <!-- <div *ngIf="updateReq == false" class="col" style="text-align: right;font-size: 15px"> -->
            <button *ngIf="updateReq == false" (click)="manageDonorReq('1','1')" ion-button block color="light" type="submit">
              Save
            </button>
          <!-- </div> -->
          
          <!-- Here record is already temporary saved, so update exsting with temporary flag -->
          <button *ngIf="updateReq == true" (click)="manageDonorReq('2','1')" ion-button block color="light" type="submit">
            Update
          </button>
        </div>
        <!-- This will be visible only if we want to add new entry with Temporary save option -->
        <!-- <div *ngIf="updateReq == false" class="col" style="text-align: right;font-size: 15px">
          <button (click)="manageDonorReq('1','1')" ion-button block color="light" type="submit">
            Temp Save
          </button>
        </div> -->

        <!-- This is preview of receipt -->
        
      </div>

     
    </form>
  <!-- End of Adding New Member-->
  </div>

 
  
  <!-- <div *ngIf="isDonarAdd == false">
    <ion-card class="accordion" *ngFor="let item of donarsData">
      <ion-card-content id="second" style="display: block">
        <ion-row>
          <ion-col col-6>
            <p style="font-size: 15px;">{{ item.FirstName }} {{ item.LastName }}</p>
          </ion-col>
          <ion-col col-6>
            <ion-icon name="download" (click)="downloadreceipt()" style="float: right;font-size: 20px;"></ion-icon>
          </ion-col>
        </ion-row>
  
        <div class="row" style="border-bottom:0px">
          <div  (click)="confirmDailNumber(item.MobileNo)" class="col" style="font-size: 15px">
            <ion-icon name="call"></ion-icon> &nbsp;
            Mobile Number
          </div>
          {{ item.ContactNo }}
        </div>
        <label style="padding-left:0px;color: #008000" (click)="openGooglemap(item.Address,item.ClusterName)">
          {{ item.Address }}
        </label>
        <div class="col">
          <hr>
        </div>
        <ion-row style="border-bottom: groove;">
          <ion-col col-4>
          <ion-label >Amount</ion-label>
        </ion-col>
        <ion-col col-4>
          <ion-label >Reg. Date</ion-label>
        </ion-col>
          <ion-col col-4>
          <ion-label >Mode</ion-label>
        </ion-col>
      </ion-row>
      <ion-row style="border-bottom: groove;">
          <ion-col col-4>
          <ion-label >{{ item.Amount }}</ion-label>
        </ion-col>
        <ion-col col-4>
          <ion-label >{{ item.RegDate }}</ion-label>
        </ion-col>
          <ion-col col-4>
          <ion-label >{{ item.PaymentMode }}</ion-label>
        </ion-col>
      </ion-row>
      <br />
      <div class="row" style="border-bottom:0px">
        <div class="col" style="font-size: 15px">
          <button ion-button block (click)="confirmPayment()"  color="success" type="submit">
            Accept
          </button>
        </div>
        <div class="col" style="text-align: right;font-size: 15px">
          <button (click)="rejectpayment()"  ion-button block color="dark" type="submit">
            Reject
          </button>
        </div>
      </div>
      </ion-card-content>
    </ion-card>
</div> -->

  
<!-- fab placed to the bottom end -->
<!-- <ion-fab right top>
  <button (click)="getContacts()" ion-fab color="light">
    <ion-icon name="{{ iconName }}"></ion-icon>
  </button>
</ion-fab> -->
</ion-content>
